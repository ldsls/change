$(function(){var target=document.getElementById('spin')
var spinner=new Spinner({lines:13,length:14,width:14,radius:42,scale:1,corners:1,color:'#000',opacity:0.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:'spinner',top:'50%',left:'50%',shadow:false,hwaccel:false,position:'relative'}).spin(target);var chineseAndEnglish=/^[-a-z\u4e00-\u9fff '.0-9]*$/i;var chinese=/[\u4e00-\u9fff]+/;var englishOnly=/^[A-Za-z0-9 '.]*$/;var maxEnglishLen=[15,30];var maxChineseLen=[12,15];if(questionnaire_config.textCheck==='TRUE'){maxChineseLen=[6,12];}
function check_answer_text(value,index){if(questionnaire_config.textCheck==='TRUE'){if(chineseAndEnglish.test(value)){if(englishOnly.test(value)){if(value.length>maxEnglishLen[index]){toastr.error(_i18n_text.toastr.en_max.replace('{count}',maxEnglishLen[index]));return false;}}else{if(value.length>maxChineseLen[index]){toastr.error(_i18n_text.toastr.cn_max.replace('{count}',maxChineseLen[index]));return false;}}}else{toastr.error(_i18n_text.toastr.invalid_char);return false;}}
if(_.includes(value,'/')||_.includes(value,'\\')){toastr.error(_i18n_text.toastr.slash);return false;}
if(chinese.test(value)){if(value.length>maxChineseLen[index]){toastr.error(_i18n_text.toastr.cn_max.replace('{count}',maxChineseLen[index]));return false;}}else{if(value.length>maxEnglishLen[index]){toastr.error(_i18n_text.toastr.en_max.replace('{count}',maxEnglishLen[index]));return false;}}
return true;}
function typedText(text,target,cb){$(target).css('visibility','hidden');$(target+' div[name="title"]').hide();$(target+' div[name="title__placeholder"]').show();$(target+' div[name="title__placeholder"]').text(text);$(target).width($(target).width());$(target+' div[name="title"]').width($(target+' div[name="title__placeholder"]').width());$(target+' div[name="title__placeholder"]').hide(function(){$(target+' div[name="title"]').show(function(){$(target).css('visibility','visible');$(target+' [name="title"]').typed({typeSpeed:0,showCursor:false,strings:[text],callback:cb});});});}
var _sampleLogos=['power_initial_02.svg','nature_initial_02.svg','casual_surrounding_04.svg','creative_reflection_02.svg','business_icon_03.svg','beauty_surrounding_04.svg','casual_icon_03.svg','beauty_surrounding_05.svg','business_surrounding_05.svg','power_icon_01.svg','casual_icon_01.svg','beauty_icon_02.svg','nature_surrounding_05.svg','creative_icon_01.svg','creative_surrounding_04.svg','business_initial_02.svg','business_icon_01.svg','beauty_reflection_01.svg','creative_initial_03.svg','casual_reflection_02.svg','nature_icon_01.svg','creative_surrounding_05.svg','power_surrounding_05.svg','power_surrounding_04.svg','beauty_icon_03.svg','nature_icon_03.svg','casual_surrounding_05.svg','power_reflection_03.svg','nature_surrounding_04.svg','business_surrounding_04.svg'];var _industryIcons=[{type:'internet',title:'互联网/高科技',svg:'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><title>industry</title><path d="M30,0A30,30,0,1,0,60,30,30,30,0,0,0,30,0ZM28.7,2.75v11.6H18.81a31.13,31.13,0,0,1,1.73-4C22.81,6,25.69,3.35,28.7,2.75Zm2.61,0c3,.59,5.89,3.23,8.15,7.56a31.13,31.13,0,0,1,1.73,4H31.3ZM21.95,3.83a22.65,22.65,0,0,0-3.71,5.26,34.89,34.89,0,0,0-2.18,5.26H7.52A27.41,27.41,0,0,1,21.95,3.83Zm16.1,0A27.41,27.41,0,0,1,52.48,14.35H43.94a34.89,34.89,0,0,0-2.18-5.26A22.65,22.65,0,0,0,38.05,3.83ZM5.89,17h9.4A51.74,51.74,0,0,0,13.72,28.7H2.65A27.28,27.28,0,0,1,5.89,17ZM18,17H28.7V28.7H16.32A48.89,48.89,0,0,1,18,17ZM31.3,17H42A48.89,48.89,0,0,1,43.68,28.7H31.3Zm13.41,0h9.4A27.28,27.28,0,0,1,57.35,28.7H46.28A51.74,51.74,0,0,0,44.71,17ZM2.65,31.3H13.72A51.56,51.56,0,0,0,15.29,43H5.89A27.2,27.2,0,0,1,2.65,31.3Zm13.68,0H28.7V43H18A49,49,0,0,1,16.32,31.3Zm15,0H43.68A49,49,0,0,1,42,43H31.3Zm15,0H57.35A27.2,27.2,0,0,1,54.11,43h-9.4A51.56,51.56,0,0,0,46.28,31.3ZM7.5,45.65h8.56a34.74,34.74,0,0,0,2.18,5.24A22.78,22.78,0,0,0,22,56.21,27.42,27.42,0,0,1,7.5,45.65Zm11.31,0H28.7V57.27c-3-.59-5.89-3.25-8.15-7.58A31.12,31.12,0,0,1,18.81,45.65Zm12.49,0h9.88a31.12,31.12,0,0,1-1.73,4c-2.26,4.33-5.14,7-8.15,7.58Zm12.64,0H52.5A27.42,27.42,0,0,1,38,56.21a22.79,22.79,0,0,0,3.75-5.32A34.73,34.73,0,0,0,43.94,45.65Z"></path></svg>'},{type:'sale',title:'电子商务',svg:'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><title>industry</title><g><path d="M42.43,16.8H52.57L47.4,33.68H37.83a1.64,1.64,0,1,0,0,3.27H48.6a1.62,1.62,0,0,0,.3,0l.09,0,.19-.06.1,0,.17-.09.08,0a1.64,1.64,0,0,0,.41-.41l0-.07.1-.18,0-.11,0-.09,6.18-20.15a1.64,1.64,0,0,0-1.56-2.12H42.43a1.64,1.64,0,0,0,0,3.27Z"></path><path d="M58.36,40.3H17A1.67,1.67,0,1,1,17,37h8.71a1.64,1.64,0,1,0,0-3.27H17a4.94,4.94,0,1,0,0,9.89H58.36a1.64,1.64,0,1,0,0-3.27Z"></path><path d="M13.25,31.79a1.64,1.64,0,0,0,1.15-2l-3.51-13H22.74a1.64,1.64,0,1,0,0-3.27H10L7.9,5.75A1.64,1.64,0,0,0,6.32,4.54H1.64a1.64,1.64,0,0,0,0,3.27H5.07l6.17,22.83a1.63,1.63,0,0,0,2,1.15Z"></path><path d="M30.81,28.75h0l-1.35-1.34a1.64,1.64,0,0,0-2.31,2.32l1.35,1.34h0a5.39,5.39,0,0,0,1.65,1.12v3.13a1.64,1.64,0,0,0,3.27,0V32.54a5.42,5.42,0,0,0,2.77-9.16L33.5,20.71,30.81,18a2.14,2.14,0,0,1,0-3,2.18,2.18,0,0,1,3.07,0h0l1.35,1.34A1.64,1.64,0,1,0,37.53,14l-1.35-1.34h0a5.41,5.41,0,0,0-2.76-1.47V8.41a1.64,1.64,0,1,0-3.27,0v3.13a5.41,5.41,0,0,0-1.65,8.8L31.19,23l2.69,2.68a2.14,2.14,0,0,1,0,3A2.18,2.18,0,0,1,30.81,28.75Z"></path><path d="M24.09,45.94a4.76,4.76,0,1,0,4.8,4.76A4.78,4.78,0,0,0,24.09,45.94Zm0,6.25a1.49,1.49,0,1,1,1.52-1.49A1.51,1.51,0,0,1,24.09,52.19Z"></path><path d="M48,45.94a4.76,4.76,0,1,0,4.8,4.76A4.78,4.78,0,0,0,48,45.94Zm0,6.25a1.49,1.49,0,1,1,1.52-1.49A1.51,1.51,0,0,1,48,52.19Z"></path></g></svg>'},{type:'food',title:'餐饮/食品',svg:'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><title>industry</title><path d="M28.59,47.17,21.93,57.3a6,6,0,0,1-3.83,2.57A5.78,5.78,0,0,1,17,60a5.53,5.53,0,0,1-3.13-1,5.71,5.71,0,0,1-1.53-7.93l.2-.28,9.17-11.89a1.9,1.9,0,0,1,3,2.33L15.51,53.14a2,2,0,0,0,.37,2.74l.09.07a1.88,1.88,0,0,0,1.41.27,2.22,2.22,0,0,0,1.41-.95L25.45,45.1a1.88,1.88,0,1,1,3.13,2.06ZM54.76,1.46c-2.5-1.8-5.91-1.95-9.53-.41a22,22,0,0,0-9,7.54c-3.26,4.58-4.78,9.84-4.07,14.09a5.18,5.18,0,0,1-.22,2.5,1.88,1.88,0,0,0,3.56,1.21A8.94,8.94,0,0,0,35.89,22c-.54-3.24.77-7.56,3.42-11.27a18.16,18.16,0,0,1,7.39-6.26c1.38-.58,4-1.35,5.89,0s2,4.08,1.93,5.57a18.16,18.16,0,0,1-3.52,9c-2.65,3.76-6.32,6.38-9.55,6.92a9,9,0,0,0-4,1.7,9.74,9.74,0,0,0-.89.77,1.88,1.88,0,0,0,2.62,2.69,5.82,5.82,0,0,1,.54-.47,5.18,5.18,0,0,1,2.26-1c4.23-.71,8.74-3.86,12-8.45a22,22,0,0,0,4.21-11c.26-3.93-1-7.07-3.5-8.87ZM27.7,24.5a8.4,8.4,0,0,0-.9-8.14L15.63.77A1.88,1.88,0,0,0,12.58,3l11.16,15.6a4.63,4.63,0,0,1,.48,4.54,3.46,3.46,0,0,0,.39,3.52L45.26,53.33a1.78,1.78,0,0,1-2.83,2.17l-.06-.09L23.65,27.3a3.46,3.46,0,0,0-3.21-1.5,4.62,4.62,0,0,1-4.18-1.88L5.1,8.33A1.88,1.88,0,0,0,2,10.51l11.17,15.6a8.4,8.4,0,0,0,7.42,3.46l18.6,28a5.49,5.49,0,0,0,3.62,2.38,5.63,5.63,0,0,0,1,.09,5.54,5.54,0,0,0,4.38-8.93ZM19.08,22a1.88,1.88,0,0,0,1.52-3L10.42,4.44A1.88,1.88,0,0,0,7.34,6.6l10.2,14.57a1.88,1.88,0,0,0,1.54.8Z"></path></svg>'},{type:'cloth',title:'服饰/配件',svg:'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><title>industry</title><g><path d="M44.8,4.25V0H15.2V4.25H5.41V60H54.59V4.25ZM18,4.79l8.51,14.74H18ZM28.62,57.24H8.18V7h7V22.29H28.08l.54.94v34ZM20,2.76H40L30,20.1Zm22,2V19.53H33.52Zm9.79,52.46H31.38v-34l.54-.94H44.8V7h7Z"></path><rect x="35.25" y="25.87" width="13.41" height="2.76"></rect><circle cx="25.51" cy="27.25" r="1.96"></circle><circle cx="25.51" cy="37.27" r="1.96"></circle><circle cx="25.51" cy="47.29" r="1.96"></circle></g></svg>'},{type:'law',title:'金融/法律/企业服务',svg:'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><title>industry</title><path d="M57.09,27.95,48.87,10.22a1.48,1.48,0,0,0,.62-1.15V7.9c0-.93-1-1.68-2.27-1.68H33.17V3.31c0-1.83-1.1-3.31-2.46-3.31H29c-1.36,0-2.46,1.48-2.46,3.31V6.23H12.72c-1.25,0-2.27.75-2.27,1.68V9.08a1.5,1.5,0,0,0,.68,1.19L2.85,27.95H2.67a9.57,9.57,0,0,0,19.13,0h-.24l-8-17.19H26.54V49.15H22.33a2,2,0,0,0-2,2v.59A2,2,0,0,0,21,53.28H19A2.93,2.93,0,0,0,16,56.21v.86A2.93,2.93,0,0,0,19,60H40.84a2.93,2.93,0,0,0,2.93-2.93v-.86a2.93,2.93,0,0,0-2.93-2.93h-2a2,2,0,0,0,.69-1.51v-.59a2,2,0,0,0-2-2h-4.3V10.76H46.44L38.38,27.95H38.2a9.57,9.57,0,0,0,19.13,0Zm-52.32,0,7.49-16,7.4,16Zm35.53,0,7.49-16,7.4,16Z"></path></svg>'},{type:'mechanic',title:'电子/机械',svg:'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><title>industry</title><g><path d="M30,41.33A11.33,11.33,0,1,1,41.33,30,11.35,11.35,0,0,1,30,41.33Zm0-18.67A7.33,7.33,0,1,0,37.33,30,7.34,7.34,0,0,0,30,22.67Z"></path><path d="M35.33,60H24.67a2,2,0,0,1-2-2V52.16a23.08,23.08,0,0,1-3.15-1.3L15.39,55a2,2,0,0,1-2.83,0L5,47.44a2,2,0,0,1,0-2.83l4.13-4.13a23.39,23.39,0,0,1-1.3-3.15H2a2,2,0,0,1-2-2V24.67a2,2,0,0,1,2-2H7.84a23.25,23.25,0,0,1,1.3-3.15L5,15.39a2,2,0,0,1,0-2.83L12.56,5a2,2,0,0,1,2.83,0l4.13,4.13a23.39,23.39,0,0,1,3.15-1.3V2a2,2,0,0,1,2-2H35.33a2,2,0,0,1,2,2V7.84a23.25,23.25,0,0,1,3.15,1.3L44.61,5a2.06,2.06,0,0,1,2.83,0L55,12.56a2,2,0,0,1,0,2.83l-4.13,4.13a23.13,23.13,0,0,1,1.3,3.15H58a2,2,0,0,1,2,2V35.33a2,2,0,0,1-2,2H52.16a23.25,23.25,0,0,1-1.3,3.15L55,44.61a2,2,0,0,1,0,2.83L47.44,55a2,2,0,0,1-2.83,0l-4.13-4.13a23.3,23.3,0,0,1-3.15,1.3V58A2,2,0,0,1,35.33,60Zm-8.67-4h6.67V50.67a2,2,0,0,1,1.5-1.94,19.34,19.34,0,0,0,5-2.06,2,2,0,0,1,2.43.31L46,50.74,50.75,46,47,42.25a2,2,0,0,1-.31-2.43,19.38,19.38,0,0,0,2.06-5,2,2,0,0,1,1.94-1.5H56V26.67H50.67a2,2,0,0,1-1.94-1.5,19.28,19.28,0,0,0-2.07-5A2,2,0,0,1,47,17.75L50.75,14,46,9.25,42.26,13a2,2,0,0,1-2.43.31,19.31,19.31,0,0,0-5-2.07,2,2,0,0,1-1.5-1.94V4H26.67V9.33a2,2,0,0,1-1.5,1.94,19.32,19.32,0,0,0-5,2.07A2,2,0,0,1,17.75,13L14,9.25,9.26,14,13,17.75a2,2,0,0,1,.31,2.43,19.3,19.3,0,0,0-2.07,5,2,2,0,0,1-1.94,1.5H4v6.67H9.33a2,2,0,0,1,1.94,1.5,19.32,19.32,0,0,0,2.07,5A2,2,0,0,1,13,42.25L9.26,46,14,50.74,17.75,47a2,2,0,0,1,2.43-.31,19.25,19.25,0,0,0,5,2.07,2,2,0,0,1,1.5,1.94V56Z"></path></g></svg>'},{type:'estate',title:'房地产/家居装饰',svg:'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><title>industry</title><path d="M60,32.5l-8-8V9.76H41.1v3.77L30,2.5,0,32.5l2.19,2.19L8.08,28.8V57.5H25.21V38.6h9.59V57.5H52V28.8l5.89,5.89ZM44.11,12.77H48.9V21.4l-4.79-4.79ZM48.9,54.42H37.81V35.51H22.19v18.9H11.1V25.72L30,6.82l18.9,18.9Z"></path></svg>'},{type:'health',title:'医疗健康',svg:'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><title>industry</title><path d="M30,7.13A17.83,17.83,0,0,0,18,2.59,18.17,18.17,0,0,0,5.28,7.86,17.81,17.81,0,0,0,0,20.62,18.06,18.06,0,0,0,5.28,33.39L28.9,57a1.63,1.63,0,0,0,2.21,0L54.72,33.39a18.07,18.07,0,0,0,0-25.52A18,18,0,0,0,30,7.13Zm22.58,24L30,53.75,7.42,31.18a10.66,10.66,0,0,1-.8-.92H9.75l4,1.66a1.57,1.57,0,0,0,2-.67l6.07-11.47,5.09,9.33a1.52,1.52,0,0,0,1.35.8H32l4.11,9a1.55,1.55,0,0,0,1.41.92h.12a1.61,1.61,0,0,0,1.35-1l5.71-18.16L49,26.08a1.6,1.6,0,0,0,1.23.61h5.52A18,18,0,0,1,52.58,31.18Zm4-7.55H50.86l-5.71-7.24a1.53,1.53,0,0,0-1.47-.55,1.46,1.46,0,0,0-1.17,1L37.12,34l-2.82-6.26a1.55,1.55,0,0,0-1.41-.92H29.14l-6-11a1.52,1.52,0,0,0-1.35-.8h0a1.52,1.52,0,0,0-1.35.8L13.68,28.54l-3.07-1.23a1.79,1.79,0,0,0-.55-.12H4.6A15,15,0,0,1,28.65,10l.31.31a1.48,1.48,0,0,0,2.15,0l.31-.31a15,15,0,0,1,21.17,0,14.84,14.84,0,0,1,4.36,10.61A12.51,12.51,0,0,1,56.63,23.63Z"></path></svg>'},{type:'education',title:'教育培训',svg:'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><title>industry</title><g><path d="M50.42,11.5a3.94,3.94,0,0,0-3.43,2L29.45,43.81a2.67,2.67,0,0,0-.38,1l-1.53,10.1a1.51,1.51,0,0,0,.75,1.49A1.55,1.55,0,0,0,30,56.29l8.14-6.5a1.75,1.75,0,0,0,.45-.58L54.29,22l1.09.64a.63.63,0,0,1,.26.94L48.95,35.15a1.51,1.51,0,0,0,2.62,1.51L58.24,25.1c.93-1.78,1.15-3.6-1.34-5.05l-1.09-.64.36-.6A4,4,0,0,0,54.7,13.4l-2.28-1.34A4,4,0,0,0,50.42,11.5Zm-.09,3a1.21,1.21,0,0,1,.58.19L53.19,16c.58.4.65.75.36,1.28L37.5,45a10.35,10.35,0,0,0-1.81-1.28,10,10,0,0,0-2.17-1L49.58,15a.89.89,0,0,1,.75-.53Z"></path><path d="M44,44.29a1.5,1.5,0,1,0,0,3H58.5a1.5,1.5,0,0,0,0-3H44Z"></path><path d="M14.21,3.4a1.57,1.57,0,0,0-1.36,1.51v3H7.59a7.47,7.47,0,0,0-5.67,2.41,7.92,7.92,0,0,0,0,10.33,6.67,6.67,0,0,0,1,.89,6.67,6.67,0,0,0-1,.89,7.92,7.92,0,0,0,0,10.33,6.66,6.66,0,0,0,1,.89,6.67,6.67,0,0,0-1,.89,7.92,7.92,0,0,0,0,10.33A7.45,7.45,0,0,0,7.59,47.3H25.34a1.54,1.54,0,0,0,1.47-1.49,1.56,1.56,0,0,0-1.47-1.51H7.59a4.29,4.29,0,0,1-3.43-1.38,5,5,0,0,1,0-6.35,4.29,4.29,0,0,1,3.43-1.39H31.47A1.56,1.56,0,0,0,33,33.68a1.58,1.58,0,0,0-1.49-1.51H7.59a4.29,4.29,0,0,1-3.43-1.39,5,5,0,0,1,0-6.35,4.29,4.29,0,0,1,3.43-1.39h5.26v4.28a1.55,1.55,0,0,0,.83,1.34,1.52,1.52,0,0,0,1.56-.15L22,23.46l6.75,5.07a1.53,1.53,0,0,0,1.58.17,1.57,1.57,0,0,0,.85-1.36V23.05h7.69a1.56,1.56,0,0,0,1.49-1.49A1.58,1.58,0,0,0,38.89,20H31.2V10.93h27.3A1.56,1.56,0,0,0,60,9.43a1.58,1.58,0,0,0-1.49-1.51H31.2v-3A1.58,1.58,0,0,0,29.68,3.4H14.21Zm1.64,3H28.17v17.9l-5.24-3.94a1.55,1.55,0,0,0-1.81,0l-5.26,3.94V6.43Zm-8.27,4.5h5.26V20H7.59a4.28,4.28,0,0,1-3.43-1.39,5,5,0,0,1,0-6.35A4.29,4.29,0,0,1,7.59,10.93Z"></path></g></svg>'},{type:'gov',title:'政府/公益组织',svg:'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><title>industry</title><path d="M0,59.38v-3H60v3Zm5-4.89v-3H55v3Zm3.41-4.75V27.91h6.87V49.74Zm12.09,0V27.91h6.87V49.74Zm12.08,0V27.91h6.87V49.74Zm12.08,0V27.91h6.87V49.74ZM5,25.87v-3H55v3ZM1.12,21.14V18.28L30,.62,58.88,18.28v2.86Z"></path></svg>'},{type:'creative',title:'文化/创意',svg:'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><title>industry</title><path d="M37.71,49.71H22.29A1.71,1.71,0,0,1,20.57,48V43.45a17.14,17.14,0,1,1,18.86,0V48A1.71,1.71,0,0,1,37.71,49.71ZM24,46.29H36v-3.8A1.71,1.71,0,0,1,36.86,41a13.71,13.71,0,1,0-13.71,0A1.71,1.71,0,0,1,24,42.49Zm14.57,6.86a1.71,1.71,0,0,0-1.71-1.71H23.14a1.71,1.71,0,0,0,0,3.43H36.86A1.71,1.71,0,0,0,38.57,53.14ZM37,58.29a1.71,1.71,0,0,0-1.71-1.71H24.67a1.71,1.71,0,1,0,0,3.43H35.33A1.72,1.72,0,0,0,37,58.29ZM31.71,6.86V1.71a1.71,1.71,0,1,0-3.43,0V6.86a1.71,1.71,0,1,0,3.43,0ZM14.85,12.42,11.21,8.79a1.71,1.71,0,0,0-2.42,2.42l3.64,3.64a1.71,1.71,0,0,0,2.42-2.42Zm32.73,2.42,3.64-3.64a1.71,1.71,0,0,0-2.42-2.42l-3.64,3.64a1.71,1.71,0,0,0,2.42,2.42ZM59.14,29.14a1.71,1.71,0,0,0-1.71-1.71H52.29a1.71,1.71,0,1,0,0,3.43h5.14A1.71,1.71,0,0,0,59.14,29.14Zm-49.71,0a1.71,1.71,0,0,0-1.71-1.71H2.57a1.71,1.71,0,0,0,0,3.43H7.71A1.71,1.71,0,0,0,9.43,29.14Z"></path></svg>'},{type:'others',title:'其他企业',svg:'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><title>industry</title><path d="M33.6,30A3.6,3.6,0,1,1,30,26.4,3.54,3.54,0,0,1,33.6,30ZM18,26.4A3.6,3.6,0,1,0,21.6,30,3.54,3.54,0,0,0,18,26.4Zm24,0A3.6,3.6,0,1,0,45.6,30,3.54,3.54,0,0,0,42,26.4ZM60,30A30,30,0,1,1,30,0,30,30,0,0,1,60,30Zm-4.8,0A25.2,25.2,0,1,0,30,55.2,25.2,25.2,0,0,0,55.2,30Z"></path></svg>'}];var _sampleLogoSelections={};_.each(_sampleLogos,function(key){_sampleLogoSelections[key]=0;});var _colorBlocks=['black','yellow','purple','orange','brown','green','blue','red'];var _colorBlockSelections={};_.each(_colorBlocks,function(key){_colorBlockSelections[key]=0;});var generatorVM=avalon.define({$id:'generator',step:-1,questions:[{text:_i18n_text.step1[0],optional:false},{text:_i18n_text.step2[0],optional:false},{text:_i18n_text.step3[0],optional:true},{text:_i18n_text.step4[0],optional:false},{text:_i18n_text.step5[0],optional:true},{text:_i18n_text.step6[0],optional:true}],_name:questionnaire_config.name,_slogan:questionnaire_config.slogan,_description:questionnaire_config.description,_layouts:[],_colors:[],_icons:[null,null,null],title:'',page0Visible:false,page1Visible:false,page2Visible:false,page3Visible:false,page4Visible:false,page5Visible:false,page1Industry:_industryIcons,page1Selection:'',page3Logos:_sampleLogos,page3Selections:_sampleLogoSelections,page4Colors:_colorBlocks,page4ColorsIntro:_i18n_text.color,page4Selections:_colorBlockSelections,page5Icons:{},skipVisible:{visibility:'hidden'},backVisible:{visibility:'hidden'},submitText:function(){if(!this.submitState()){if(this.step===0||this.step===2){return _i18n_text.button.enter;}
if(this.step===3){return _i18n_text.button.pick1.replace('{count}',this._layouts.length);}
return _i18n_text.button.pick2;}
if(this.step<(this.totalQuestion-1)){return _i18n_text.button.next;}
return _i18n_text.button.submit;},submitState:function(){return this['page'+this.step+'Valid'];},iconSearchFinish:false,questionFinish:false,$computed:{page0Valid:function(){if(this._name.trim()){return true;}
return false;},page1Valid:function(){if(this.page1Selection.trim()){return true;}
return false;},page2Valid:function(){if(this._description.trim()){return true;}
return false;},page3Valid:function(){if(this._layouts.length>=5){return true;}
return false;},page4Valid:function(){if(this._colors.length>0){return true;}
return false;},page5Valid:function(){return _.filter(generatorVM._icons,Boolean).length>0;},totalQuestion:function(){if(this.iconSearchFinish&&(_.size(this.page5Icons)>0)){return this.questions.length;}
return this.questions.length-1;}},collectData:function(){var layouts=[];var styles=[];for(var idx in this._layouts){var val=this._layouts[idx].split('_');if(val.length>=2){styles.push(val[0]);layouts.push(val[1]);}}
var data={name:this._name,slogan:this._slogan,industry:this.page1Selection,layouts:layouts,styles:styles,colors:this._colors.toJSON(),description:this._description,icons:_.filter(this._icons,Boolean)};return data;},resetData:function(n){if(n===2){this._description='';}else if(n===4){this._colors.clear();for(var key in this.page4Selections){this.page4Selections[key]=0;}}else if(n===5){this._icons.set(0,null);this._icons.set(1,null);this._icons.set(2,null);}},selectIndustry:function(industry){this.page1Selection=industry;this.step===1&&this.step++;},toggleLayout:function(logo){if(this.page3Selections[logo]){this._layouts.remove(logo);}else{this._layouts.push(logo);}
this.page3Selections[logo]=!this.page3Selections[logo];},toggleColor:function(color){if(this.page4Selections[color]){this._colors.remove(color);}else{this._colors.push(color);}
this.page4Selections[color]=!this.page4Selections[color];},queryIcon:function(){var self=this;self.page5Icons={};self.iconSearchFinish=false;$.ajax({url:questionnaire_config.iconUrl,data:{q:this._name+' '+this._slogan+' '+this._description},dataType:'json',type:'POST',timeout:70000,headers:{"X-CSRFToken":questionnaire_config.t},success:function(data){self.iconSearchFinish=true;var iconImages={};var icons=[];for(var key in data.icons){icons=icons.concat(data.icons[key]);}
var icon=[];var compiled=_.template('<li><div class="icon--item" data-id="<%= id %>"><img src="<%= src %>" /></div></li>');_.each(_.shuffle(icons),function(data){iconImages[data.id]=data.preview_url;icon.push(compiled({id:data.id,src:data.preview_url}));});self.page5Icons=iconImages;$('#page5 ul#icon__detail').html(icon.join(''));self._icons.set(0,null);self._icons.set(1,null);self._icons.set(2,null);},error:function(){}});},unselectIcon:function(icon){var idx=this._icons.indexOf(icon);if(idx>=0){this._icons.removeAt(idx);this._icons.push(null);$('.icon--item[data-id="'+icon+'"]').removeClass('selected');}},validate0:function(){var _name=this._name.trim();var _slogan=this._slogan.trim();if(!check_answer_text(_name,0)){return false}
if(!check_answer_text(_slogan,1)){return false}
this._name=_name;this._slogan=_slogan;return true;},onEnter0:function(){setTimeout(function(){$('#page0 [name="name"]').focus();},10);},onEnter2:function(){setTimeout(function(){$('#page1 [name="description"]').focus();},10);},onSubmit2:function(){var _description=this._description.trim();this.queryIcon();this._description=_description;this.step++;},onSubmit4:function(){if((this.totalQuestion-1)>4){this.step++;return;}
this.postForm();},onSubmit5:function(){this.postForm();},onSkip2:function(){this._description='';this.queryIcon();},onSkip4:function(){this.resetData(3);if((this.totalQuestion-1)>3&&_.size(this.page5Icons)>0){return;}
this.postForm();return true;},onSkip5:function(){this.resetData(4);this.postForm();return true;},onKeyPress:function(ev){if(ev.keyCode===13){ev.preventDefault();this.submit();}},goBack:function(){if(this.questionFinish){return;}
if(!this['page'+this.step+'Visible']){return;}
if(this.step>=0){this.step--;}},skip:function(){if(this.questionFinish){return;}
if(!this['page'+this.step+'Visible']){return;}
if(this['onSkip'+this.step]&&this['onSkip'+this.step]()){return;}
if(this.step<this.questions.length){this.resetData(this.step);this.step++;}},submit:function(){if(this.questionFinish){return;}
if(!this['page'+this.step+'Visible']){return;}
if(!this.submitState()){return;}
if(this['validate'+this.step]&&!this['validate'+this.step]()){return;}
if(this['onSubmit'+this.step]){this['onSubmit'+this.step]();}else{this.step++;}},postForm:function(){this.questionFinish=true;var self=this;$.ajax({url:questionnaire_config.sessionUrl,data:this.collectData(),type:'POST',headers:{"X-CSRFToken":questionnaire_config.t},success:function(response){window.location=questionnaire_config.processingUrl+'?sid='+response;},error:function(xhr,textStatus,error){toastr.error(_i18n_text.toastr.retry);self.questionFinish=false;}});}});generatorVM.$watch('step',function(newVal,oldVal){location.hash='step'+newVal;var isMobile=(screen.width<768);$('#title__text').attr('style','visibility: hidden;')
if(!isMobile){$('#title__text div[name="title"]').hide();}
$('#title__text div[name="title__placeholder"]').show();if(newVal<0||newVal>(this.totalQuestion-1)){this.title='';}
else{this.title=this.questions[newVal].text;}
if(newVal<=0){this.backVisible={visibility:'hidden'};}
else{this.backVisible={visibility:'visible'};}
if(this.questions[newVal]&&this.questions[newVal].optional){this.skipVisible={visibility:'visible'};}
else{this.skipVisible={visibility:'hidden'};}
var progress=((newVal+1)/this.totalQuestion)*100;if(progress<0){progress=0;}
if(progress>100){progress=100;}
$('.step__progress .bar').animate({width:progress+'%'});var self=this;setTimeout(function(){$('#title__text').width($('#title__text').width());if(isMobile){$('#title__text div[name="title"]').hide();}
$('#title__text div[name="title"]').width($('#title__text div[name="title__placeholder"]').width());$('#title__text div[name="title__placeholder"]').hide(function(){$('#title__text div[name="title"]').show(function(){$('#title__text').css('visibility','visible');$('#title__text [name="title"]').typed({typeSpeed:0,showCursor:false,strings:[self.title],callback:function(){self['page'+newVal+'Visible']=true;}});});});var oldEle=$('#page'+oldVal);var newEle=$('#page'+newVal);if(oldEle.length>0){oldEle.fadeOut(700,function(){self['page'+oldVal+'Visible']=false;$(document).scrollTop(0)
newEle.fadeIn(700,function(){if(self['onEnter'+self.step]){self['onEnter'+self.step]();}});});}else{$(document).scrollTop(0)
newEle.fadeIn(700,function(){if(self['onEnter'+self.step]){self['onEnter'+self.step]();}});}},0);});avalon.scan(document.getElementById('generator'));$('#generator').show();function startGenerate(){$('#title__text3').fadeOut(function(){$('#title__text2').fadeOut(function(){$('#title__text1').fadeOut(function(){$('#title__text').css('visibility','hidden');$('#title__text').show();generatorVM.step=0;});});});}
if(questionnaire_config.login){startGenerate();}else{typedText(_i18n_text.step0[0],'#title__text1',function(){typedText(_i18n_text.step0[1],'#title__text2',function(){typedText(_i18n_text.step0[2],'#title__text3',function(){setTimeout(startGenerate,1500);});});});}
$('#page5 ul').delegate('.icon--item','click',function(){var idx=generatorVM._icons.indexOf(null);if(idx<0){return;}
var ele=$(this);if(ele.hasClass('selected')){return;}
ele.addClass('selected');var iconId=ele.data('id');if(!iconId){return;}
generatorVM._icons.set(idx,iconId);if(!ele.data('down')){ele.data('down',true);$.ajax({url:questionnaire_config.downUrl,data:{id:iconId},type:'POST',timeout:70000,headers:{"X-CSRFToken":questionnaire_config.t},success:function(){},error:function(){}});}});$('textarea[name="description"]').keyup(function(){var ele=$(this);var padding=parseInt(ele.css('padding'),10)*2;var height=Math.max(this.scrollHeight-padding,80);var maxHeight=Math.min(screen.height/3,280);height=Math.min(height,maxHeight);ele.height(height);});if(_.includes(window.location.search,'debug=1')){window.generatorVM=generatorVM;}});